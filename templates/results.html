<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>News Sentiment & Bias Analysis</title>

    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }
        th { background-color: #f2f2f2; }

        .positive { color: #28a745; font-weight: bold; }
        .negative { color: #dc3545; font-weight: bold; }
        .neutral  { color: #007bff; font-weight: bold; }

        small { color: #555; font-weight: normal; }
    </style>
</head>
<body>

<h1>News Sentiment & Bias Analysis</h1>
<p><a href="/history">View History</a></p>

<form action="/analyze" method="post">
    <input type="url" name="url" required style="width:60%; padding:8px;">
    <button type="submit">Analyse</button>
</form>

<h2>Results</h2>

<table>
    <thead>
        <tr>
            <th>
                RoBERTa <br>
                <small>Emotional direction and model confidence</small>
            </th>

            <th>
                TextBlob<br>
                <small>Lexicon tone score (-1 negative â†’ +1 positive)</small>
            </th>

            <th>
                Language Bias<br>
                <small>Amount of emotional or exaggerated wording</small>
            </th>

            <th>Source</th>
            <th>Title</th>
        </tr>
    </thead>

    <tbody>
        {% for item in analysis_results %}
        <tr>

            <!-- RoBERTa -->
            <td>
                <div class="{{ item.sentiment }}">
                    {{ item.sentiment | upper }}
                </div>
                <small>
                    Confidence: {{ (item.sentiment_score * 100) | round(1) }}%
                </small>
            </td>

            <!-- TextBlob -->
            <td>
                <div class="{{ item.textblob_label }}">
                    {{ item.textblob_label | upper }}
                </div>
                <small>
                    Score: {{ item.textblob_score }}
                </small>
            </td>

            <!-- Bias -->
            <td>
                <strong>{{ item.bias.bias_level | upper }}</strong><br>
                <small>
                    Emotional: {{ (item.bias.emotive_ratio * 100) | round(2) }}%<br>
                    Absolutist: {{ item.bias.absolutist_count }}
                </small>
            </td>

            <!-- Source -->
            <td>
                {% if item.url %}
                    <a href="{{ item.url }}" target="_blank">{{ item.source }}</a>
                {% else %}
                    {{ item.source }}
                {% endif %}
            </td>

            <!-- Title -->
            <td>{{ item.title }}</td>

        </tr>
        {% endfor %}
    </tbody>
</table>

</body>
</html>